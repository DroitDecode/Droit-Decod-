<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Droit Décodé - À Propos</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">

    <style>
        :root {
            --color-primary-red: #E84D3D;
            --color-primary-blue: #3E4B7A;
            --color-secondary-bg: #F8F9FA;
        }
        body { background-color: var(--color-secondary-bg); min-height: 100vh; display: flex; flex-direction: column; font-family: 'Inter', sans-serif; }
        
        /* Matching the screenshot style */
        .nav-link-mobile {
            padding: 1rem;
            width: 100%;
            text-align: center;
            font-weight: 600;
            color: #4B5563;
            border-bottom: 1px solid #f3f4f6;
        }
        .nav-link-mobile.active {
            color: var(--color-primary-red);
            position: relative;
        }
        /* The red underline from your screenshot */
        .nav-link-mobile.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 3px;
            background-color: var(--color-primary-red);
        }

        .btn-contact-mobile {
            background-color: var(--color-primary-red);
            color: white;
            padding: 0.75rem 2rem;
            border-radius: 0.5rem;
            font-weight: 700;
            margin-top: 1rem;
        }

        .btn-login-mobile {
            border: 1px solid var(--color-primary-blue);
            color: var(--color-primary-blue);
            padding: 0.75rem 2rem;
            border-radius: 0.5rem;
            font-weight: 600;
            margin-top: 1rem;
            background: white;
        }

        .editable-content:focus { outline: 2px solid var(--color-primary-red); background-color: #fff9f9; padding: 4px; border-radius: 4px; }
    </style>
</head>
<body>

    <header class="bg-white sticky top-0 z-50 shadow-sm">
        <div class="max-w-6xl mx-auto px-4 h-16 flex justify-between items-center">
            <a href="index.html" class="flex items-center space-x-2">
                <img src="logo1.jpeg" alt="Logo" class="h-10 w-10 rounded-full">
                <div class="text-xl font-black"><span class="text-primary-blue">DROIT</span> <span class="text-primary-red">DÉCODÉ</span></div>
            </a>

            <nav class="hidden md:flex space-x-8 font-bold text-gray-600">
                <a href="index.html">Accueil</a>
                <a href="articles.html">Articles & Explications</a>
                <a href="about.html" class="text-primary-red border-b-2 border-primary-red">À Propos</a>
                <div id="admin-zone-desktop" class="hidden"></div>
                <a href="contact.html" class="text-primary-red">Contact</a>
            </nav>

            <button id="menu-btn" class="md:hidden text-primary-blue text-3xl">&#9776;</button>
        </div>

        <div id="mobile-menu" class="hidden md:hidden bg-white border-t flex flex-col items-center pb-6">
            <span id="user-greeting-mobile" class="py-2 text-xs text-gray-400 font-bold"></span>
            
            <a href="index.html" class="nav-link-mobile">Accueil</a>
            <a href="articles.html" class="nav-link-mobile">Articles & Explications</a>
            <a href="tiktok.html" class="nav-link-mobile">TikTok Publications</a>
            <a href="about.html" class="nav-link-mobile active">À Propos</a>
            
            <div id="admin-zone-mobile" class="hidden w-full text-center py-2"></div>

            <a href="contact.html" class="btn-contact-mobile">Contact</a>
            <a id="auth-btn-mobile" href="login.html" class="btn-login-mobile">Se connecter</a>
        </div>
    </header>

    <main class="max-w-4xl mx-auto px-4 py-10">
        <h1 id="main-title" class="text-3xl md:text-5xl font-black text-center text-primary-blue border-b-4 border-primary-red pb-4 mb-8 editable-content">Chargement...</h1>
        
        <section class="bg-white p-6 md:p-10 rounded-2xl shadow-xl mb-10">
            <h2 class="text-2xl font-bold text-primary-red mb-4 uppercase text-center md:text-left">Notre Mission</h2>
            <div id="mission-text" class="text-lg md:text-xl leading-relaxed text-gray-700 italic border-l-4 border-primary-blue pl-4 md:pl-6 mb-10 editable-content">Chargement...</div>
            
            <div class="p-6 md:p-8 bg-primary-blue text-white rounded-2xl shadow-2xl">
                <h3 class="text-xl md:text-2xl font-bold mb-4 text-center md:text-left">Notre Engagement</h3>
                <div id="engagement-text" class="text-base md:text-lg opacity-90 leading-relaxed editable-content">Chargement...</div>
            </div>
        </section>
    </main>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, onSnapshot, setDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDpNtHXiZK3bIyLwAUlTNAiWRrg2vhPYeE",
            authDomain: "droitdecode-9aa4d.firebaseapp.com",
            projectId: "droitdecode-9aa4d",
            storageBucket: "droitdecode-9aa4d.firebasestorage.app",
            messagingSenderId: "219930978240",
            appId: "1:219930978240:web:886c40e47d276c75548a25"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const ADMIN_UID = "v4086Cxmi9PMI31GUBZzY8rHyIA3";
        const DOC_REF = doc(db, "Pages", "About");

        const menuBtn = document.getElementById('menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        const authBtnMob = document.getElementById('auth-btn-mobile');
        const userGreetingMob = document.getElementById('user-greeting-mobile');
        const fields = { title: document.getElementById('main-title'), mission: document.getElementById('mission-text'), engagement: document.getElementById('engagement-text') };
        const adminZoneMobile = document.getElementById('admin-zone-mobile');

        let isEditing = false;

        menuBtn.onclick = () => mobileMenu.classList.toggle('hidden');

        onSnapshot(DOC_REF, (snap) => {
            if (snap.exists() && !isEditing) {
                const data = snap.data();
                fields.title.innerText = data.title || "Droit Décodé";
                fields.mission.innerText = data.mission || "Ma mission...";
                fields.engagement.innerText = data.engagement || "Mon engagement...";
            }
        });

        onAuthStateChanged(auth, (user) => {
            if (user) {
                userGreetingMob.innerText = `Connecté en tant que : ${user.displayName || user.email.split('@')[0]}`;
                authBtnMob.innerText = "Déconnexion";
                authBtnMob.onclick = (e) => { e.preventDefault(); signOut(auth).then(() => window.location.reload()); };
                if (user.uid === ADMIN_UID) { adminZoneMobile.classList.remove('hidden'); renderAdminBtn(); }
            } else {
                authBtnMob.innerText = "Se connecter";
                authBtnMob.href = "login.html";
            }
        });

        function renderAdminBtn() {
            adminZoneMobile.innerHTML = '';
            const btn = document.createElement('button');
            btn.className = "bg-primary-blue text-white px-6 py-2 rounded-lg font-bold mt-2";
            btn.innerText = isEditing ? "ENREGISTRER" : "MODIFIER LA PAGE";
            btn.onclick = isEditing ? saveChanges : () => { isEditing = true; Object.values(fields).forEach(el => el.contentEditable = true); renderAdminBtn(); };
            adminZoneMobile.appendChild(btn);
        }

        async function saveChanges() {
            await setDoc(DOC_REF, { title: fields.title.innerText, mission: fields.mission.innerText, engagement: fields.engagement.innerText }, { merge: true });
            isEditing = false;
            Object.values(fields).forEach(el => el.contentEditable = false);
            renderAdminBtn();
            alert("Page mise à jour !");
        }
    </script>
</body>
</html>
